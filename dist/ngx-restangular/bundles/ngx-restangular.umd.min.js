!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@angular/core"),require("lodash"),require("@angular/common/http"),require("core-js/fn/object"),require("rxjs"),require("rxjs/operators"),require("tslib")):"function"==typeof define&&define.amd?define("ngx-restangular",["exports","@angular/core","lodash","@angular/common/http","core-js/fn/object","rxjs","rxjs/operators","tslib"],r):r(e["ngx-restangular"]={},e.ng.core,null,e.ng.common.http,null,null,e.Rx.Observable.prototype,e.tslib)}(this,function(e,r,B,o,a,G,s,u){"use strict";var n=new r.InjectionToken("restangularWithConfig");function i(e){var r={fn:e[0],arrServices:[]};return B.isArray(e[0])&&(r={arrServices:e[0],fn:e[1]}),r}var t=function(){function i(){}return i.createRequest=function(e){var r=i.createRequestQueryParams(e.params),t=i.createRequestHeaders(e.headers),n=e.method.toUpperCase(),s=e.withCredentials||!1,a=new o.HttpRequest(n,e.url,e.data,{headers:t,params:r,responseType:e.responseType,withCredentials:s});return 0<=["GET","DELETE","HEAD","JSONP","OPTIONS"].indexOf(n)&&(a=new o.HttpRequest(n,e.url,{headers:t,params:r,responseType:e.responseType,withCredentials:s})),a},i.createRequestQueryParams=function(e){var t=a.assign({},e),n=new o.HttpParams,r=function(r){var e=t[r];Array.isArray(e)?e.forEach(function(e){n=n.append(r,e)}):("object"==typeof e&&(e=JSON.stringify(e)),n=n.append(r,e))};for(var s in t)r(s);return n},i.createRequestHeaders=function(e){for(var r in e){void 0===e[r]&&delete e[r]}return new o.HttpHeaders(a.assign({},e))},i}(),l=function(){function e(e){this.http=e}return e.prototype.createRequest=function(e){var r=t.createRequest(e);return this.request(r)},e.prototype.request=function(r){var t=this;return this.http.handle(r).pipe(s.filter(function(e){return e instanceof o.HttpResponse}),s.map(function(e){return e.ok?e:G.throwError(new o.HttpErrorResponse(e))}),s.map(function(e){return e.config={params:r},e}),s.catchError(function(e){return e.request=r,e.data=e.error,e.repeatRequest=function(e){return t.request(e||r)},G.throwError(e)}))},e.decorators=[{type:r.Injectable}],e.ctorParameters=function(){return[{type:o.HttpBackend}]},e}();function V(i,F){i.configuration=F;var r=["get","head","options","trace","getlist"];F.isSafe=function(e){return B.includes(r,e.toLowerCase())};var t=/^https?:\/\//i;F.isAbsoluteUrl=function(e){return B.isUndefined(F.absoluteUrl)||B.isNull(F.absoluteUrl)?e&&t.test(e):F.absoluteUrl},F.absoluteUrl=!!B.isUndefined(F.absoluteUrl)||F.absoluteUrl,i.setSelfLinkAbsoluteUrl=function(e){F.absoluteUrl=e},F.baseUrl=B.isUndefined(F.baseUrl)?"":F.baseUrl,i.setBaseUrl=function(e){return F.baseUrl=/\/$/.test(e)?e.substring(0,e.length-1):e,this},F.extraFields=F.extraFields||[],i.setExtraFields=function(e){return F.extraFields=e,this},F.defaultHttpFields=F.defaultHttpFields||{},i.setDefaultHttpFields=function(e){return F.defaultHttpFields=e,this},F.plainByDefault=F.plainByDefault||!1,i.setPlainByDefault=function(e){return F.plainByDefault=!0===e,this},F.withHttpValues=function(e,r){return B.defaults(r,e,F.defaultHttpFields)},F.encodeIds=!!B.isUndefined(F.encodeIds)||F.encodeIds,i.setEncodeIds=function(e){F.encodeIds=e},F.defaultRequestParams=F.defaultRequestParams||{get:{},post:{},put:{},remove:{},common:{}},i.setDefaultRequestParams=function(e,r){var t=[],n=r||e;return B.isUndefined(r)?t.push("common"):B.isArray(e)?t=e:t.push(e),B.each(t,function(e){F.defaultRequestParams[e]=n}),this},i.requestParams=F.defaultRequestParams,F.defaultHeaders=F.defaultHeaders||{},i.setDefaultHeaders=function(e){return F.defaultHeaders=e,i.defaultHeaders=F.defaultHeaders,this},i.defaultHeaders=F.defaultHeaders,F.defaultResponseMethod=F.defaultResponseMethod||"promise",i.setDefaultResponseMethod=function(e){return F.defaultResponseMethod=e,i.defaultResponseMethod=F.defaultResponseMethod,this},i.defaultResponseMethod=F.defaultResponseMethod,F.methodOverriders=F.methodOverriders||[],i.setMethodOverriders=function(e){var r=B.extend([],e);return F.isOverridenMethod("delete",r)&&r.push("remove"),F.methodOverriders=r,this},F.jsonp=!B.isUndefined(F.jsonp)&&F.jsonp,i.setJsonp=function(e){F.jsonp=e},F.isOverridenMethod=function(r,e){var t=e||F.methodOverriders;return!B.isUndefined(B.find(t,function(e){return e.toLowerCase()===r.toLowerCase()}))},F.urlCreator=F.urlCreator||"path",i.setUrlCreator=function(e){if(!B.has(F.urlCreatorFactory,e))throw new Error("URL Path selected isn't valid");return F.urlCreator=e,this},F.restangularFields=F.restangularFields||{id:"id",route:"route",parentResource:"parentResource",restangularCollection:"restangularCollection",cannonicalId:"__cannonicalId",etag:"restangularEtag",selfLink:"href",get:"get",getList:"getList",put:"put",post:"post",remove:"remove",head:"head",trace:"trace",options:"options",patch:"patch",getRestangularUrl:"getRestangularUrl",getRequestedUrl:"getRequestedUrl",putElement:"putElement",addRestangularMethod:"addRestangularMethod",getParentList:"getParentList",clone:"clone",ids:"ids",httpConfig:"_$httpConfig",reqParams:"reqParams",one:"one",all:"all",several:"several",oneUrl:"oneUrl",allUrl:"allUrl",customPUT:"customPUT",customPATCH:"customPATCH",customPOST:"customPOST",customDELETE:"customDELETE",customGET:"customGET",customGETLIST:"customGETLIST",customOperation:"customOperation",doPUT:"doPUT",doPATCH:"doPATCH",doPOST:"doPOST",doDELETE:"doDELETE",doGET:"doGET",doGETLIST:"doGETLIST",fromServer:"fromServer",withConfig:"withConfig",withHttpConfig:"withHttpConfig",singleOne:"singleOne",plain:"plain",save:"save",restangularized:"restangularized"},i.setRestangularFields=function(e){return F.restangularFields=B.extend({},F.restangularFields,e),this},F.isRestangularized=function(e){return!!e[F.restangularFields.restangularized]},F.setFieldToElem=function(e,r,t){var n=e.split("."),s=r;B.each(B.initial(n),function(e){s[e]={},s=s[e]});var a=B.last(n);return s[a]=t,this},F.getFieldFromElem=function(e,r){var t=e.split("."),n=r;return B.each(t,function(e){n&&(n=n[e])}),B.clone(n)},F.setIdToElem=function(e,r){return F.setFieldToElem(F.restangularFields.id,e,r),this},F.getIdFromElem=function(e){return F.getFieldFromElem(F.restangularFields.id,e)},F.isValidId=function(e){return""!==e&&!B.isUndefined(e)&&!B.isNull(e)},F.setUrlToElem=function(e,r){return F.setFieldToElem(F.restangularFields.selfLink,e,r),this},F.getUrlFromElem=function(e){return F.getFieldFromElem(F.restangularFields.selfLink,e)},F.useCannonicalId=!B.isUndefined(F.useCannonicalId)&&F.useCannonicalId,i.setUseCannonicalId=function(e){return F.useCannonicalId=e,this},F.getCannonicalIdFromElem=function(e){var r=e[F.restangularFields.cannonicalId];return F.isValidId(r)?r:F.getIdFromElem(e)},F.responseInterceptors=F.responseInterceptors?u.__spread(F.responseInterceptors):[],F.defaultResponseInterceptor=function(e){return e||{}},F.responseExtractor=function(e,r,t,n,s,a){var i=B.clone(F.responseInterceptors);i.push(F.defaultResponseInterceptor);var o=e;return B.each(i,function(e){o=e(o,r,t,n,s,a)}),o},i.addResponseInterceptor=function(e){return F.responseInterceptors.push(e),this},F.errorInterceptors=F.errorInterceptors?u.__spread(F.errorInterceptors):[],i.addErrorInterceptor=function(e){return F.errorInterceptors=u.__spread([e],F.errorInterceptors),this},i.setResponseInterceptor=i.addResponseInterceptor,i.setResponseExtractor=i.addResponseInterceptor,i.setErrorInterceptor=i.addErrorInterceptor,F.requestInterceptors=F.requestInterceptors?u.__spread(F.requestInterceptors):[],F.defaultInterceptor=function(e,r,t,n,s,a,i){return{element:e,headers:s,params:a,httpConfig:i}},F.fullRequestInterceptor=function(e,n,s,a,r,t,i){var o=B.clone(F.requestInterceptors),u=F.defaultInterceptor(e,n,s,a,r,t,i);return B.reduce(o,function(e,r){var t=r(e.element,n,s,a,e.headers,e.params,e.httpConfig);return B.extend(e,t)},u)},i.addRequestInterceptor=function(o){return F.requestInterceptors.push(function(e,r,t,n,s,a,i){return{headers:s,params:a,element:o(e,r,t,n),httpConfig:i}}),this},i.setRequestInterceptor=i.addRequestInterceptor,i.addFullRequestInterceptor=function(e){return F.requestInterceptors.push(e),this},i.setFullRequestInterceptor=i.addFullRequestInterceptor,F.onBeforeElemRestangularized=F.onBeforeElemRestangularized||function(e){return e},i.setOnBeforeElemRestangularized=function(e){return F.onBeforeElemRestangularized=e,this},i.setRestangularizePromiseInterceptor=function(e){return F.restangularizePromiseInterceptor=e,this},F.onElemRestangularized=F.onElemRestangularized||function(e){return e},i.setOnElemRestangularized=function(e){return F.onElemRestangularized=e,this},F.shouldSaveParent=F.shouldSaveParent||function(){return!0},i.setParentless=function(r){return B.isArray(r)?F.shouldSaveParent=function(e){return!B.includes(r,e)}:B.isBoolean(r)&&(F.shouldSaveParent=function(){return!r}),this},F.suffix=B.isUndefined(F.suffix)?null:F.suffix,i.setRequestSuffix=function(e){return F.suffix=e,this},F.transformers=F.transformers||{},i.addElementTransformer=function(e,r,t){var n=null,s=null;2===arguments.length?s=r:(s=t,n=r);var a=F.transformers[e];return a||(a=F.transformers[e]=[]),a.push(function(e,r){return B.isNull(n)||e===n?s(r):r}),i},i.extendCollection=function(e,r){return i.addElementTransformer(e,!0,r)},i.extendModel=function(e,r){return i.addElementTransformer(e,!1,r)},F.transformElem=function(e,r,t,n,s){if(!s&&!F.transformLocalElements&&!e[F.restangularFields.fromServer])return e;var a=F.transformers[t],i=e;return a&&B.each(a,function(e){i=e(r,i)}),F.onElemRestangularized(i,r,t,n)},F.transformLocalElements=!B.isUndefined(F.transformLocalElements)&&F.transformLocalElements,i.setTransformOnlyServerElements=function(e){F.transformLocalElements=!e},F.fullResponse=!B.isUndefined(F.fullResponse)&&F.fullResponse,i.setFullResponse=function(e){return F.fullResponse=e,this},F.urlCreatorFactory={};var e=function(){};e.prototype.setConfig=function(e){return this.config=e,this},e.prototype.parentsArray=function(e){for(var r=[];e;)r.push(e),e=e[this.config.restangularFields.parentResource];return r.reverse()},e.prototype.resource=function(e,r,t,n,s,a,i,o){var u=B.defaults(s||{},this.config.defaultRequestParams.common),l=B.defaults(n||{},this.config.defaultHeaders);i&&(F.isSafe(o)?l["If-None-Match"]=i:l["If-Match"]=i);var d,c,f,g,p,h=this.base(e);if(a){var m="";/\/$/.test(h)||(m+="/"),h+=m+=a}return this.config.suffix&&-1===h.indexOf(this.config.suffix,h.length-this.config.suffix.length)&&!this.config.getUrlFromElem(e)&&(h+=this.config.suffix),e[this.config.restangularFields.httpConfig]=undefined,d=this.config,c=r,f=h,g={getList:this.config.withHttpValues(t,{method:"GET",params:u,headers:l}),get:this.config.withHttpValues(t,{method:"GET",params:u,headers:l}),jsonp:this.config.withHttpValues(t,{method:"jsonp",params:u,headers:l}),put:this.config.withHttpValues(t,{method:"PUT",params:u,headers:l}),post:this.config.withHttpValues(t,{method:"POST",params:u,headers:l}),remove:this.config.withHttpValues(t,{method:"DELETE",params:u,headers:l}),head:this.config.withHttpValues(t,{method:"HEAD",params:u,headers:l}),trace:this.config.withHttpValues(t,{method:"TRACE",params:u,headers:l}),options:this.config.withHttpValues(t,{method:"OPTIONS",params:u,headers:l}),patch:this.config.withHttpValues(t,{method:"PATCH",params:u,headers:l})},p={},B.each(B.keys(g),function(e){var t=g[e];t.params=B.extend({},t.params,d.defaultRequestParams[t.method.toLowerCase()]),B.isEmpty(t.params)&&delete t.params,d.isSafe(t.method)?p[e]=function(){var e=B.extend(t,{url:f});return c.createRequest(e)}:p[e]=function(e){var r=B.extend(t,{url:f,data:e});return c.createRequest(r)}}),p};var n=function(){};(n.prototype=new e).normalizeUrl=function(e){var r=/((?:http[s]?:)?\/\/)?(.*)?/.exec(e);return r[2]=r[2].replace(/[\\\/]+/g,"/"),"undefined"!=typeof r[1]?r[1]+r[2]:r[2]},n.prototype.base=function(e){var i=this;return B.reduce(this.parentsArray(e),function(e,r){var t,n=i.config.getUrlFromElem(r);if(n){if(i.config.isAbsoluteUrl(n))return n;t=n}else if(t=r[i.config.restangularFields.route],r[i.config.restangularFields.restangularCollection]){var s=r[i.config.restangularFields.ids];s&&(t+="/"+s.join(","))}else{var a;a=i.config.useCannonicalId?i.config.getCannonicalIdFromElem(r):i.config.getIdFromElem(r),F.isValidId(a)&&!r.singleOne&&(t+="/"+(i.config.encodeIds?encodeURIComponent(a):a))}return e=e.replace(/\/$/,"")+"/"+t,i.normalizeUrl(e)},this.config.baseUrl)},n.prototype.fetchUrl=function(e,r){var t=this.base(e);return r&&(t+="/"+r),t},n.prototype.fetchRequestedUrl=function(e,r){var t=this.fetchUrl(e,r),n=e[F.restangularFields.reqParams];function s(e,r){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,r?"%20":"+")}if(!n)return t+(this.config.suffix||"");var a=[];return function(e,r,t){for(var n=function(e){var r=[];for(var t in e)e.hasOwnProperty(t)&&r.push(t);return r.sort()}(e),s=0;s<n.length;s++)r.call(t,e[n[s]],n[s])}(n,function(e,r){null!==e&&e!==undefined&&(B.isArray(e)||(e=[e]),B.forEach(e,function(e){B.isObject(e)&&(e=JSON.stringify(e)),a.push(s(r)+"="+s(e))}))}),t+(this.config.suffix||"")+(-1===t.indexOf("?")?"?":"&")+a.join("&")},F.urlCreatorFactory.path=n}var d=function(){function e(e,r,t){this.configObj=e,this.injector=r,this.http=t,this.provider=new function(A){var e={};V(this,e),this.$get=function(){function t(v){var E={},R=new v.urlCreatorFactory[v.urlCreator];function u(e,r,t,n,s){if(r[v.restangularFields.route]=t,r[v.restangularFields.getRestangularUrl]=B.bind(R.fetchUrl,R,r),r[v.restangularFields.getRequestedUrl]=B.bind(R.fetchRequestedUrl,R,r),r[v.restangularFields.addRestangularMethod]=B.bind(D,r),r[v.restangularFields.clone]=B.bind(h,r),r[v.restangularFields.reqParams]=B.isEmpty(n)?null:n,r[v.restangularFields.withHttpConfig]=B.bind(T,r),r[v.restangularFields.plain]=B.bind(C,r,r),r[v.restangularFields.restangularized]=!0,r[v.restangularFields.one]=B.bind(l,r,r),r[v.restangularFields.all]=B.bind(d,r,r),r[v.restangularFields.several]=B.bind(c,r,r),r[v.restangularFields.oneUrl]=B.bind(f,r,r),r[v.restangularFields.allUrl]=B.bind(g,r,r),r[v.restangularFields.fromServer]=!!s,e&&v.shouldSaveParent(t)){var a=v.getIdFromElem(e),i=v.getUrlFromElem(e),o=B.union(B.values(B.pick(v.restangularFields,["route","singleOne","parentResource"])),v.extraFields),u=B.pick(e,o);v.isValidId(a)&&v.setIdToElem(u,a,t),v.isValidId(i)&&v.setUrlToElem(u,i,t),r[v.restangularFields.parentResource]=u}else r[v.restangularFields.parentResource]=null;return r}function l(e,r,t,n){var s;if(B.isNumber(r)||B.isNumber(e))throw s="You're creating a Restangular entity with the number ",s+="instead of the route or the parent. For example, you can't call .one(12).",new Error(s);if(B.isUndefined(r))throw s="You're creating a Restangular entity either without the path. ",s+="For example you can't call .one(). Please check if your arguments are valid.",new Error(s);var a={};return v.setIdToElem(a,t,r),v.setFieldToElem(v.restangularFields.singleOne,a,n),U(e,a,r,!1)}function d(e,r){return m(e,[],r,!1)}function c(e,r){var t=[];return t[v.restangularFields.ids]=Array.prototype.splice.call(arguments,2),m(e,t,r,!1)}function f(e,r,t){if(!r)throw new Error("Route is mandatory when creating new Restangular objects.");var n={};return v.setUrlToElem(n,t,r),U(e,n,r,!1)}function g(e,r,t){if(!r)throw new Error("Route is mandatory when creating new Restangular objects.");var n={};return v.setUrlToElem(n,t,r),m(e,n,r,!1)}function I(e,r,t){return e.pipe(s.filter(function(e){return!!e})).toPromise()}function y(e,r,t,n){B.extend(n,t),v.fullResponse?e.next(B.extend(r,{data:t})):e.next(t),e.complete()}function C(e){if(B.isArray(e)){var r=[];return B.each(e,function(e){r.push(v.isRestangularized(e)?C(e):e)}),r}return B.omit(e,B.values(B.omit(v.restangularFields,"id")))}function p(s){s[v.restangularFields.customOperation]=B.bind(M,s);var r={get:M,"delete":M};B.each(["put","patch","post"],function(e){r[e]=function(e,r,t,n,s){return B.bind(M,this)(e,t,n,s,r)}}),B.each(r,function(r,t){var n="delete"===t?"remove":t;B.each(["do","custom"],function(e){s[e+t.toUpperCase()]=B.bind(r,s,n)})}),s[v.restangularFields.customGETLIST]=B.bind(b,s),s[v.restangularFields.doGETLIST]=s[v.restangularFields.customGETLIST]}function h(e){var r=B.cloneDeep(e);return U(r[v.restangularFields.parentResource],r,r[v.restangularFields.route],!0)}function U(e,r,t,n,s,a){var i=v.onBeforeElemRestangularized(r,!1,t),o=u(e,i,t,a,n);return v.useCannonicalId&&(o[v.restangularFields.cannonicalId]=v.getIdFromElem(o)),s&&(o[v.restangularFields.getParentList]=function(){return s}),o[v.restangularFields.restangularCollection]=!1,o[v.restangularFields.get]=B.bind(O,o),o[v.restangularFields.getList]=B.bind(b,o),o[v.restangularFields.put]=B.bind(q,o),o[v.restangularFields.post]=B.bind(S,o),o[v.restangularFields.remove]=B.bind(P,o),o[v.restangularFields.head]=B.bind(L,o),o[v.restangularFields.trace]=B.bind(j,o),o[v.restangularFields.options]=B.bind(H,o),o[v.restangularFields.patch]=B.bind(z,o),o[v.restangularFields.save]=B.bind(x,o),p(o),v.transformElem(o,!1,t,E,!0)}function m(e,r,t,n,s){var a=v.onBeforeElemRestangularized(r,!0,t),i=u(e,a,t,s,n);return i[v.restangularFields.restangularCollection]=!0,i[v.restangularFields.post]=B.bind(S,i,null),i[v.restangularFields.remove]=B.bind(P,i),i[v.restangularFields.head]=B.bind(L,i),i[v.restangularFields.trace]=B.bind(j,i),i[v.restangularFields.putElement]=B.bind(F,i),i[v.restangularFields.options]=B.bind(H,i),i[v.restangularFields.patch]=B.bind(z,i),i[v.restangularFields.get]=B.bind(o,i),i[v.restangularFields.getList]=B.bind(b,i,null),p(i),v.transformElem(i,!0,t,E,!0)}function o(e,r,t){return this.customGET(e.toString(),r,t)}function F(t,e,r){var n=this,s=this[t],a=new G.BehaviorSubject(null),i=[];return i=v.transformElem(i,!0,s[v.restangularFields.route],E),s.put(e,r).subscribe(function(e){var r=h(n);r[t]=e,i=r,a.next(r)},function(e){a.error(e)},function(){a.complete()}),I(a,!0,i)}function w(e,r,t,n,s,a){var i=v.responseExtractor(e,r,t,n,s,a),o=s.headers.get("ETag");return i&&o&&(i[v.restangularFields.etag]=o),i}function b(a,e,r){var i=this,o=new G.BehaviorSubject(null),u="getList",l=R.fetchUrl(this,a),d=a||i[v.restangularFields.route],t=v.fullRequestInterceptor(null,u,d,l,r||{},e||{},this[v.restangularFields.httpConfig]||{}),c=[];c=v.transformElem(c,!0,d,E);var n="getList";v.jsonp&&(n="jsonp");var s=function(e){var r=e.body,t=e.config.params,n=w(r,u,d,l,e,o);if((B.isUndefined(n)||""===n)&&(n=[]),!B.isArray(n))throw new Error("Response for getList SHOULD be an array and not an object or something else");if(!0===v.plainByDefault)return y(o,e,n,c);var s=B.map(n,function(e){return i[v.restangularFields.restangularCollection]?U(i[v.restangularFields.parentResource],e,i[v.restangularFields.route],!0,n):U(i,e,a,!0,n)});s=B.extend(n,s),i[v.restangularFields.restangularCollection]?y(o,e,m(i[v.restangularFields.parentResource],s,i[v.restangularFields.route],!0,t),c):y(o,e,m(i,s,a,!0,t),c)};return R.resource(this,A,t.httpConfig,t.headers,t.params,a,this[v.restangularFields.etag],u)[n]().subscribe(s,function(r){304===r.status&&i[v.restangularFields.restangularCollection]?y(o,r,i,c):B.every(v.errorInterceptors,function(e){return!1!==e(r,o,s)})&&o.error(r)}),I(o,!0,c)}function T(e){return this[v.restangularFields.httpConfig]=e,this}function x(e,r){return this[v.restangularFields.fromServer]?this[v.restangularFields.put](e,r):B.bind(a,this)("post",undefined,e,undefined,r)}function a(a,e,r,t,n){var i=this,o=new G.BehaviorSubject(null),s=r||{},u=e||this[v.restangularFields.route],l=R.fetchUrl(this,e),d=t||this,c=d[v.restangularFields.etag]||("post"!==a?this[v.restangularFields.etag]:null);B.isObject(d)&&v.isRestangularized(d)&&(d=C(d));var f=v.fullRequestInterceptor(d,a,u,l,n||{},s||{},this[v.restangularFields.httpConfig]||{}),g={};g=v.transformElem(g,!1,u,E);var p=function(e){var r=B.get(e,"body"),t=B.get(e,"config.params"),n=w(r,a,u,l,e,o);if(n){var s;if(!0===v.plainByDefault)return y(o,e,n,g);"post"!==a||i[v.restangularFields.restangularCollection]?(s=U(i[v.restangularFields.parentResource],n,i[v.restangularFields.route],!0,null,t))[v.restangularFields.singleOne]=i[v.restangularFields.singleOne]:s=U(i[v.restangularFields.parentResource],n,u,!0,null,t),y(o,e,s,g)}else y(o,e,undefined,g)},h=function(r){304===r.status&&v.isSafe(a)?y(o,r,i,g):B.every(v.errorInterceptors,function(e){return!1!==e(r,o,p)})&&o.error(r)},m=a,F=B.extend({},f.headers),b=v.isOverridenMethod(a);return b?(m="post",F=B.extend(F,{"X-HTTP-Method-Override":"remove"===a?"DELETE":a.toUpperCase()})):v.jsonp&&"get"===m&&(m="jsonp"),v.isSafe(a)?b?R.resource(this,A,f.httpConfig,F,f.params,e,c,m)[m]({}).subscribe(p,h):R.resource(this,A,f.httpConfig,F,f.params,e,c,m)[m]().subscribe(p,h):R.resource(this,A,f.httpConfig,F,f.params,e,c,m)[m](f.element).subscribe(p,h),I(o,!1,g)}function O(e,r){return B.bind(a,this)("get",undefined,e,undefined,r)}function P(e,r){return B.bind(a,this)("remove",undefined,e,undefined,r)}function q(e,r){return B.bind(a,this)("put",undefined,e,undefined,r)}function S(e,r,t,n){return B.bind(a,this)("post",e,t,r,n)}function L(e,r){return B.bind(a,this)("head",undefined,e,undefined,r)}function j(e,r){return B.bind(a,this)("trace",undefined,e,undefined,r)}function H(e,r){return B.bind(a,this)("options",undefined,e,undefined,r)}function z(e,r,t){return B.bind(a,this)("patch",undefined,r,e,t)}function M(e,r,t,n,s){return B.bind(a,this)(e,r,t,s,n)}function D(e,r,t,s,a,i){var o;o="getList"===r?B.bind(b,this,t):B.bind(M,this,r,t);var n=function(e,r,t){var n=B.defaults({params:e,headers:r,elem:t},{params:s,headers:a,elem:i});return o(n.params,n.headers,n.elem)};v.isSafe(r)?this[e]=n:this[e]=function(e,r,t){return n(r,t,e)}}return R.setConfig(v),V(E,v),E.copy=B.bind(h,E),E.service=B.bind(function(e,r){var t=B.values(v.restangularFields),n={},s=(r||E).all(e);for(var a in n.one=B.bind(l,r||E,r,e),n.all=B.bind(s.all,s),n.post=B.bind(s.post,s),n.getList=B.bind(s.getList,s),n.withHttpConfig=B.bind(s.withHttpConfig,s),n.get=B.bind(s.get,s),s)s.hasOwnProperty(a)&&B.isFunction(s[a])&&!B.includes(t,a)&&(n[a]=B.bind(s[a],s));return n},E),E.withConfig=B.bind(function(e){var r=B.clone(B.omit(v,"configuration"));return V(r,r),e(r),t(r)},E),E.one=B.bind(l,E,null),E.all=B.bind(d,E,null),E.several=B.bind(c,E,null),E.oneUrl=B.bind(f,E,null),E.allUrl=B.bind(g,E,null),E.stripRestangular=B.bind(C,E),E.restangularizeElement=B.bind(U,E),E.restangularizeCollection=B.bind(function(r,e,t){var n=m(r,e,t,!1);return B.each(n,function(e){e&&U(r,e,t,!1)}),n},E),E}return function(v){var E={};var R=new v.urlCreatorFactory[v.urlCreator];R.setConfig(v);function u(e,r,t,n,s){if(r[v.restangularFields.route]=t,r[v.restangularFields.getRestangularUrl]=B.bind(R.fetchUrl,R,r),r[v.restangularFields.getRequestedUrl]=B.bind(R.fetchRequestedUrl,R,r),r[v.restangularFields.addRestangularMethod]=B.bind(D,r),r[v.restangularFields.clone]=B.bind(h,r),r[v.restangularFields.reqParams]=B.isEmpty(n)?null:n,r[v.restangularFields.withHttpConfig]=B.bind(T,r),r[v.restangularFields.plain]=B.bind(C,r,r),r[v.restangularFields.restangularized]=!0,r[v.restangularFields.one]=B.bind(l,r,r),r[v.restangularFields.all]=B.bind(d,r,r),r[v.restangularFields.several]=B.bind(c,r,r),r[v.restangularFields.oneUrl]=B.bind(f,r,r),r[v.restangularFields.allUrl]=B.bind(g,r,r),r[v.restangularFields.fromServer]=!!s,e&&v.shouldSaveParent(t)){var a=v.getIdFromElem(e),i=v.getUrlFromElem(e),o=B.union(B.values(B.pick(v.restangularFields,["route","singleOne","parentResource"])),v.extraFields),u=B.pick(e,o);v.isValidId(a)&&v.setIdToElem(u,a,t),v.isValidId(i)&&v.setUrlToElem(u,i,t),r[v.restangularFields.parentResource]=u}else r[v.restangularFields.parentResource]=null;return r}function l(e,r,t,n){var s;if(B.isNumber(r)||B.isNumber(e))throw s="You're creating a Restangular entity with the number ",s+="instead of the route or the parent. For example, you can't call .one(12).",new Error(s);if(B.isUndefined(r))throw s="You're creating a Restangular entity either without the path. ",s+="For example you can't call .one(). Please check if your arguments are valid.",new Error(s);var a={};return v.setIdToElem(a,t,r),v.setFieldToElem(v.restangularFields.singleOne,a,n),U(e,a,r,!1)}function d(e,r){return m(e,[],r,!1)}function c(e,r){var t=[];return t[v.restangularFields.ids]=Array.prototype.splice.call(arguments,2),m(e,t,r,!1)}function f(e,r,t){if(!r)throw new Error("Route is mandatory when creating new Restangular objects.");var n={};return v.setUrlToElem(n,t,r),U(e,n,r,!1)}function g(e,r,t){if(!r)throw new Error("Route is mandatory when creating new Restangular objects.");var n={};return v.setUrlToElem(n,t,r),m(e,n,r,!1)}function I(e,r,t){return e.pipe(s.filter(function(e){return!!e})).toPromise()}function y(e,r,t,n){B.extend(n,t),v.fullResponse?e.next(B.extend(r,{data:t})):e.next(t),e.complete()}function C(e){if(B.isArray(e)){var r=[];return B.each(e,function(e){r.push(v.isRestangularized(e)?C(e):e)}),r}return B.omit(e,B.values(B.omit(v.restangularFields,"id")))}function p(s){s[v.restangularFields.customOperation]=B.bind(M,s);var r={get:M,"delete":M};B.each(["put","patch","post"],function(e){r[e]=function(e,r,t,n,s){return B.bind(M,this)(e,t,n,s,r)}}),B.each(r,function(r,t){var n="delete"===t?"remove":t;B.each(["do","custom"],function(e){s[e+t.toUpperCase()]=B.bind(r,s,n)})}),s[v.restangularFields.customGETLIST]=B.bind(b,s),s[v.restangularFields.doGETLIST]=s[v.restangularFields.customGETLIST]}function h(e){var r=B.cloneDeep(e);return U(r[v.restangularFields.parentResource],r,r[v.restangularFields.route],!0)}function U(e,r,t,n,s,a){var i=v.onBeforeElemRestangularized(r,!1,t),o=u(e,i,t,a,n);return v.useCannonicalId&&(o[v.restangularFields.cannonicalId]=v.getIdFromElem(o)),s&&(o[v.restangularFields.getParentList]=function(){return s}),o[v.restangularFields.restangularCollection]=!1,o[v.restangularFields.get]=B.bind(O,o),o[v.restangularFields.getList]=B.bind(b,o),o[v.restangularFields.put]=B.bind(q,o),o[v.restangularFields.post]=B.bind(S,o),o[v.restangularFields.remove]=B.bind(P,o),o[v.restangularFields.head]=B.bind(L,o),o[v.restangularFields.trace]=B.bind(j,o),o[v.restangularFields.options]=B.bind(H,o),o[v.restangularFields.patch]=B.bind(z,o),o[v.restangularFields.save]=B.bind(x,o),p(o),v.transformElem(o,!1,t,E,!0)}function m(e,r,t,n,s){var a=v.onBeforeElemRestangularized(r,!0,t),i=u(e,a,t,s,n);return i[v.restangularFields.restangularCollection]=!0,i[v.restangularFields.post]=B.bind(S,i,null),i[v.restangularFields.remove]=B.bind(P,i),i[v.restangularFields.head]=B.bind(L,i),i[v.restangularFields.trace]=B.bind(j,i),i[v.restangularFields.putElement]=B.bind(F,i),i[v.restangularFields.options]=B.bind(H,i),i[v.restangularFields.patch]=B.bind(z,i),i[v.restangularFields.get]=B.bind(o,i),i[v.restangularFields.getList]=B.bind(b,i,null),p(i),v.transformElem(i,!0,t,E,!0)}function o(e,r,t){return this.customGET(e.toString(),r,t)}function F(t,e,r){var n=this,s=this[t],a=new G.BehaviorSubject(null),i=[];return i=v.transformElem(i,!0,s[v.restangularFields.route],E),s.put(e,r).subscribe(function(e){var r=h(n);r[t]=e,i=r,a.next(r)},function(e){a.error(e)},function(){a.complete()}),I(a,!0,i)}function w(e,r,t,n,s,a){var i=v.responseExtractor(e,r,t,n,s,a),o=s.headers.get("ETag");return i&&o&&(i[v.restangularFields.etag]=o),i}function b(a,e,r){var i=this,o=new G.BehaviorSubject(null),u="getList",l=R.fetchUrl(this,a),d=a||i[v.restangularFields.route],t=v.fullRequestInterceptor(null,u,d,l,r||{},e||{},this[v.restangularFields.httpConfig]||{}),c=[];c=v.transformElem(c,!0,d,E);var n="getList";v.jsonp&&(n="jsonp");var s=function(e){var r=e.body,t=e.config.params,n=w(r,u,d,l,e,o);if((B.isUndefined(n)||""===n)&&(n=[]),!B.isArray(n))throw new Error("Response for getList SHOULD be an array and not an object or something else");if(!0===v.plainByDefault)return y(o,e,n,c);var s=B.map(n,function(e){return i[v.restangularFields.restangularCollection]?U(i[v.restangularFields.parentResource],e,i[v.restangularFields.route],!0,n):U(i,e,a,!0,n)});s=B.extend(n,s),i[v.restangularFields.restangularCollection]?y(o,e,m(i[v.restangularFields.parentResource],s,i[v.restangularFields.route],!0,t),c):y(o,e,m(i,s,a,!0,t),c)};return R.resource(this,A,t.httpConfig,t.headers,t.params,a,this[v.restangularFields.etag],u)[n]().subscribe(s,function(r){304===r.status&&i[v.restangularFields.restangularCollection]?y(o,r,i,c):B.every(v.errorInterceptors,function(e){return!1!==e(r,o,s)})&&o.error(r)}),I(o,!0,c)}function T(e){return this[v.restangularFields.httpConfig]=e,this}function x(e,r){return this[v.restangularFields.fromServer]?this[v.restangularFields.put](e,r):B.bind(a,this)("post",undefined,e,undefined,r)}function a(a,e,r,t,n){var i=this,o=new G.BehaviorSubject(null),s=r||{},u=e||this[v.restangularFields.route],l=R.fetchUrl(this,e),d=t||this,c=d[v.restangularFields.etag]||("post"!==a?this[v.restangularFields.etag]:null);B.isObject(d)&&v.isRestangularized(d)&&(d=C(d));var f=v.fullRequestInterceptor(d,a,u,l,n||{},s||{},this[v.restangularFields.httpConfig]||{}),g={};g=v.transformElem(g,!1,u,E);var p=function(e){var r=B.get(e,"body"),t=B.get(e,"config.params"),n=w(r,a,u,l,e,o);if(n){var s;if(!0===v.plainByDefault)return y(o,e,n,g);"post"!==a||i[v.restangularFields.restangularCollection]?(s=U(i[v.restangularFields.parentResource],n,i[v.restangularFields.route],!0,null,t))[v.restangularFields.singleOne]=i[v.restangularFields.singleOne]:s=U(i[v.restangularFields.parentResource],n,u,!0,null,t),y(o,e,s,g)}else y(o,e,undefined,g)},h=function(r){304===r.status&&v.isSafe(a)?y(o,r,i,g):B.every(v.errorInterceptors,function(e){return!1!==e(r,o,p)})&&o.error(r)},m=a,F=B.extend({},f.headers),b=v.isOverridenMethod(a);return b?(m="post",F=B.extend(F,{"X-HTTP-Method-Override":"remove"===a?"DELETE":a.toUpperCase()})):v.jsonp&&"get"===m&&(m="jsonp"),v.isSafe(a)?b?R.resource(this,A,f.httpConfig,F,f.params,e,c,m)[m]({}).subscribe(p,h):R.resource(this,A,f.httpConfig,F,f.params,e,c,m)[m]().subscribe(p,h):R.resource(this,A,f.httpConfig,F,f.params,e,c,m)[m](f.element).subscribe(p,h),I(o,!1,g)}function O(e,r){return B.bind(a,this)("get",undefined,e,undefined,r)}function P(e,r){return B.bind(a,this)("remove",undefined,e,undefined,r)}function q(e,r){return B.bind(a,this)("put",undefined,e,undefined,r)}function S(e,r,t,n){return B.bind(a,this)("post",e,t,r,n)}function L(e,r){return B.bind(a,this)("head",undefined,e,undefined,r)}function j(e,r){return B.bind(a,this)("trace",undefined,e,undefined,r)}function H(e,r){return B.bind(a,this)("options",undefined,e,undefined,r)}function z(e,r,t){return B.bind(a,this)("patch",undefined,r,e,t)}function M(e,r,t,n,s){return B.bind(a,this)(e,r,t,s,n)}function D(e,r,t,s,a,i){var o;o="getList"===r?B.bind(b,this,t):B.bind(M,this,r,t);var n=function(e,r,t){var n=B.defaults({params:e,headers:r,elem:t},{params:s,headers:a,elem:i});return o(n.params,n.headers,n.elem)};v.isSafe(r)?this[e]=n:this[e]=function(e,r,t){return n(r,t,e)}}V(E,v);E.copy=B.bind(h,E);E.service=B.bind(function(e,r){var t=B.values(v.restangularFields),n={},s=(r||E).all(e);for(var a in n.one=B.bind(l,r||E,r,e),n.all=B.bind(s.all,s),n.post=B.bind(s.post,s),n.getList=B.bind(s.getList,s),n.withHttpConfig=B.bind(s.withHttpConfig,s),n.get=B.bind(s.get,s),s)s.hasOwnProperty(a)&&B.isFunction(s[a])&&!B.includes(t,a)&&(n[a]=B.bind(s[a],s));return n},E);E.withConfig=B.bind(function(e){var r=B.clone(B.omit(v,"configuration"));return V(r,r),e(r),t(r)},E);E.one=B.bind(l,E,null);E.all=B.bind(d,E,null);E.several=B.bind(c,E,null);E.oneUrl=B.bind(f,E,null);E.allUrl=B.bind(g,E,null);E.stripRestangular=B.bind(C,E);E.restangularizeElement=B.bind(U,E);E.restangularizeCollection=B.bind(function(r,e,t){var n=m(r,e,t,!1);return B.each(n,function(e){e&&U(r,e,t,!1)}),n},E);return E}(e)}}(t);var n=this.provider.$get();a.assign(this,n),this.setDefaultConfig()}return e.prototype.setDefaultConfig=function(){var r=this;if(this.configObj&&B.isFunction(this.configObj.fn)){var e,t=B.map(this.configObj.arrServices,function(e){return r.injector.get(e)});(e=this.configObj).fn.apply(e,u.__spread([this.provider],t))}},e.decorators=[{type:r.Injectable}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:r.Optional},{type:r.Inject,args:[n]}]},{type:r.Injector},{type:l}]},e}();var c=new r.InjectionToken("configObj"),f=function(){function t(e){if(e)throw new Error("RestangularModule is already loaded. Import it in the AppModule only")}return t.forRoot=function(e,r){return{ngModule:t,providers:[{provide:c,useValue:[e,r]},{provide:n,useFactory:i,deps:[c]}]}},t.decorators=[{type:r.NgModule,args:[{imports:[o.HttpClientModule],providers:[l,d]}]}],t.ctorParameters=function(){return[{type:t,decorators:[{type:r.Optional},{type:r.SkipSelf}]}]},t}();e.RestangularModule=f,e.Restangular=d,e.RestangularHttp=l,e.ɵb=n,e.ɵc=i,e.ɵa=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-restangular.umd.min.js.map